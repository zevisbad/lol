<!DOCTYPE html>
<html>
<head>
  <title>SH Joiner</title>
</head>
<body>
  <h1>Join Current Servers</h1>
  <div id="servers"></div>

  <script>
    const PLACE_ID = "109983668079237";
    const URL = "jobid.json"; // GitHub Pages URL to your JSON

    async function updateLinks() {
      const res = await fetch(URL + "?nocache=" + Date.now());
      const data = await res.json();
      const div = document.getElementById("servers");
      div.innerHTML = "";

      if (!data.servers || data.servers.length === 0) {
        div.innerHTML = "<p>No servers yet</p>";
        return;
      }

      // Loop through all JobIds
      data.servers.forEach(s => {
        const a = document.createElement("a");
        a.href = `roblox://placeId=${PLACE_ID}&gameInstanceId=${s.jobId}`;
        a.innerText = `Join Server (${s.timestamp.split("T")[1].split(".")[0]} UTC)`;
        a.style.display = "block";
        a.style.margin = "5px 0";
        div.appendChild(a);
      });
    }

    updateLinks();
    setInterval(updateLinks, 100); // refresh every 10s
  </script>
</body>
</html>
